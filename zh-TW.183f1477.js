function e(e,t,a,n){Object.defineProperty(e,t,{get:a,set:n,enumerable:!0,configurable:!0})}var t=globalThis.parcelRequire2198;(0,t.register)("dw8Rk",function(a,n){let r,i,o,s,c,l,u,g,f,h,d,p,v,m,b,y,w;e(a.exports,"TranslationModel",()=>X),e(a.exports,"textJoin",()=>B);var L,k,S,T,j,P,E,O,x,M=t("a2E6i"),C=t("gPvyW");function R(e,t,a,n){Object.defineProperty(e,t,{get:a,set:n,enumerable:!0,configurable:!0})}var W={};R(W,"SpeechSynthesisState",function(){return x}),R(W,"SpeechSynthesisModel",function(){return I});var $=function(e,t,a){for(var n=arguments.length>2,r=0;r<t.length;r++)a=n?t[r].call(e,a):t[r].call(e);return n?a:void 0},N=function(e,t,a,n,r,i){function o(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var s,c=n.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?n.static?e:e.prototype:null,g=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f=!1,h=a.length-1;h>=0;h--){var d={};for(var p in n)d[p]="access"===p?{}:n[p];for(var p in n.access)d.access[p]=n.access[p];d.addInitializer=function(e){if(f)throw TypeError("Cannot add initializers after decoration has completed");i.push(o(e||null))};var v=(0,a[h])("accessor"===c?{get:g.get,set:g.set}:g[l],d);if("accessor"===c){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw TypeError("Object expected");(s=o(v.get))&&(g.get=s),(s=o(v.set))&&(g.set=s),(s=o(v.init))&&r.unshift(s)}else(s=o(v))&&("field"===c?r.unshift(s):g[l]=s)}u&&Object.defineProperty(u,n.name,g),f=!0},V=function(e,t,a,n){if("a"===a&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?n:"a"===a?n.call(e):n?n.value:t.get(e)},z=function(e,t,a,n,r){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!r)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,a):r?r.value=a:t.set(e,a),a};(L=x||(x={}))[L.Clear=0]="Clear",L[L.Speaking=1]="Speaking",L[L.Pause=2]="Pause";let I=(o=[],s=[],c=[],k=class{get state(){return V(this,T,"f")}set state(e){z(this,T,e,"f")}get language(){var e,t;return(null===(e=this.i18n)||void 0===e?void 0:e.currentLanguage)||(null===(t=globalThis.navigator)||void 0===t?void 0:t.language)}constructor(e){Object.defineProperty(this,"i18n",{enumerable:!0,configurable:!0,writable:!0,value:($(this,o),e)}),T.set(this,$(this,s,x.Clear)),S.set(this,$(this,c)),Object.defineProperty(this,"clear",{enumerable:!0,configurable:!0,writable:!0,value:()=>{var e;this.state=x.Clear,null===(e=V(this,S,"f"))||void 0===e||e.call(this),speechSynthesis.cancel()}}),e&&z(this,S,(0,M.reaction)(()=>e.currentLanguage,this.clear),"f"),globalThis.addEventListener("unload",this.clear)}static getVoices(){let e=speechSynthesis.getVoices();return e[0]?Promise.resolve(e):new Promise(e=>{(0,C.sleep)(1).then(()=>e([])),speechSynthesis.onvoiceschanged=()=>e(speechSynthesis.getVoices())})}speak(e){var t,a,n,r;return t=this,a=void 0,n=void 0,r=function*(){let{language:t}=this,a=new SpeechSynthesisUtterance(e),n=yield k.getVoices();a.voice=n.find(({localService:e,lang:a})=>e&&a===t)||n.find(({default:e})=>e);let r=new Promise((e,t)=>{a.onend=e,a.onerror=t});speechSynthesis.speak(a),this.state=x.Speaking;try{yield r}finally{this.clear()}},new(n||(n=Promise))(function(e,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(t){var a;t.done?e(t.value):((a=t.value)instanceof n?a:new n(function(e){e(a)})).then(o,s)}c((r=r.apply(t,a||[])).next())})}toggle(){this.state===x.Speaking?(speechSynthesis.pause(),this.state=x.Pause):(speechSynthesis.resume(),this.state=x.Speaking)}static*walk(e){var t;let{commonAncestorContainer:a,endContainer:n}=e,r=document.createNodeIterator(a);for(;(t=r.nextNode())&&(e.intersectsNode(t)&&(yield t),a===n||t!==n););}static getSelectedText(e){var t;let a=null===(t=getSelection())||void 0===t?void 0:t.getRangeAt(0);if(!(null==a?void 0:a.toString())||!(null==e?void 0:e.contains(a.commonAncestorContainer)))throw RangeError("No text selected");return[...this.walk(a)].filter(({nodeType:e,parentNode:t})=>{if(3!==e)return;let{width:a,height:n}=t.getBoundingClientRect();return a&&n}).map(({nodeValue:e},t,{length:n})=>e.slice(0===t?a.startOffset:0,t===n-1?a.endOffset:1/0)).filter(e=>e.trim()).join("").trim()}static getReadableText(e){try{return this.getSelectedText(e)}catch(t){return(0,C.getVisibleText)(e)}}},S=new WeakMap,T=new WeakMap,(()=>{let e="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;r=[M.observable],i=[M.computed],N(k,null,r,{kind:"accessor",name:"state",static:!1,private:!1,access:{has:e=>"state"in e,get:e=>e.state,set:(e,t)=>{e.state=t}},metadata:e},s,c),N(k,null,i,{kind:"getter",name:"language",static:!1,private:!1,access:{has:e=>"language"in e,get:e=>e.language},metadata:e},null,o),e&&Object.defineProperty(k,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:e})})(),k);R({},"TranslationModel",function(){return X});var q={};R(q,"isNumberLetter",function(){return A}),R(q,"textJoin",function(){return B}),R(q,"parseCookie",function(){return D}),R(q,"setCookie",function(){return F}),R(q,"parseLanguageHeader",function(){return J});let A=(e="")=>RegExp("\\p{N}","u").test(e)||RegExp("\\p{Ll}","u").test(e.toLowerCase()),B=(...e)=>e.map((t,a)=>{var n;let r=A(t.slice(-1));return a+1===e.length?t:t+(r!==A(null===(n=e[a+1])||void 0===n?void 0:n.trim()[0])||r?" ":"")}).join(""),D=(e=globalThis.document.cookie)=>e?Object.fromEntries(e.split(/;\s*/).map(e=>e.split("="))):{};function F(e,t,a={}){let n=`${e}=${t}`,r=Object.entries(a).map(([e,t])=>"boolean"==typeof t?t?e:"":`${e}=${t}`).filter(Boolean).join("; ");return document.cookie=`${n}; expires=${new Date(0)}`,document.cookie=`${n}; ${r}`}let J=e=>e.split(",").map(e=>{let[t,a=""]=e.split(";"),[n,r="1"]=a.split("=");return[t.trim(),+r]}).sort(([e,t],[a,n])=>n-t).map(([e])=>e);var H=function(e,t,a){for(var n=arguments.length>2,r=0;r<t.length;r++)a=n?t[r].call(e,a):t[r].call(e);return n?a:void 0},U=function(e,t,a,n,r,i){function o(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var s,c=n.kind,l="getter"===c?"get":"setter"===c?"set":"value",u=!t&&e?n.static?e:e.prototype:null,g=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f=!1,h=a.length-1;h>=0;h--){var d={};for(var p in n)d[p]="access"===p?{}:n[p];for(var p in n.access)d.access[p]=n.access[p];d.addInitializer=function(e){if(f)throw TypeError("Cannot add initializers after decoration has completed");i.push(o(e||null))};var v=(0,a[h])("accessor"===c?{get:g.get,set:g.set}:g[l],d);if("accessor"===c){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw TypeError("Object expected");(s=o(v.get))&&(g.get=s),(s=o(v.set))&&(g.set=s),(s=o(v.init))&&r.unshift(s)}else(s=o(v))&&("field"===c?r.unshift(s):g[l]=s)}u&&Object.defineProperty(u,n.name,g),f=!0},G=function(e,t,a,n){return new(a||(a=Promise))(function(r,i){function o(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(o,s)}c((n=n.apply(e,t||[])).next())})},K=function(e,t,a,n){if("a"===a&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?n:"a"===a?n.call(e):n?n.value:t.get(e)},Q=function(e,t,a,n,r){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!r)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,a):r?r.value=a:t.set(e,a),a};let X=(d=[],p=[],v=[],m=[],b=[],y=[],w=[],j=class{get loading(){return K(this,P,"f")}set loading(e){Q(this,P,e,"f")}get currentLanguage(){return K(this,E,"f")}set currentLanguage(e){Q(this,E,e,"f")}get currentMap(){return K(this,O,"f")}set currentMap(e){Q(this,O,e,"f")}get defaultMap(){return this.configuration[this.defaultLanguage]}constructor(e){for(let t in Object.defineProperty(this,"configuration",{enumerable:!0,configurable:!0,writable:!0,value:(H(this,d),e)}),P.set(this,H(this,p,!1)),Object.defineProperty(this,"defaultLanguage",{enumerable:!0,configurable:!0,writable:!0,value:H(this,v)}),E.set(this,H(this,m,"")),O.set(this,(H(this,b),H(this,y,{}))),Object.defineProperty(this,"t",{enumerable:!0,configurable:!0,writable:!0,value:(H(this,w),this.textOf.bind(this))}),e)"function"!=typeof e[t]&&(this.defaultLanguage=t);if(!this.defaultLanguage)throw ReferenceError("One static language map is required");if(!globalThis.window)return;let t=[D().language,...navigator.languages||[this.defaultLanguage]].filter(Boolean);this.loadLanguages(t),window.addEventListener("languagechange",()=>this.changeLanguage(navigator.language))}onLanguageChange(e){(0,M.reaction)(()=>this.currentLanguage,(t,a)=>{a&&e.call(this,t)})}setLanguage(e){var t;this.currentLanguage=e,(null===(t=globalThis.document)||void 0===t?void 0:t.documentElement)&&F("language",document.documentElement.lang=e,{path:"/"})}changeLanguage(e){return G(this,void 0,void 0,function*(){let t=this.configuration[e];if("function"!=typeof t)return this.setLanguage(e),this.currentMap=t;this.loading=!0;let{default:a}=yield t();return this.loading=!1,this.setLanguage(e),this.currentMap=this.configuration[e]=a})}loadLanguages(e){return G(this,void 0,void 0,function*(){let t=Object.keys(this.configuration).sort(({length:e},{length:t})=>t-e);for(let a of e){let e=t.includes(a)?a:t.find(e=>a.startsWith(e)||e.startsWith(a));if(e)try{return yield this.changeLanguage(e)}catch(e){}}return this.changeLanguage(this.defaultLanguage)})}textOf(e,t){let a=this.currentMap[e]||this.defaultMap[e];if("function"!=typeof a)return a;if(!t)throw ReferenceError("Input data is required for Translation Resolver");return a(t)}},P=new WeakMap,E=new WeakMap,O=new WeakMap,(()=>{let e="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;l=[M.observable],u=[M.observable],g=[M.observable],f=[M.computed],h=[M.action],U(j,null,l,{kind:"accessor",name:"loading",static:!1,private:!1,access:{has:e=>"loading"in e,get:e=>e.loading,set:(e,t)=>{e.loading=t}},metadata:e},p,v),U(j,null,u,{kind:"accessor",name:"currentLanguage",static:!1,private:!1,access:{has:e=>"currentLanguage"in e,get:e=>e.currentLanguage,set:(e,t)=>{e.currentLanguage=t}},metadata:e},m,b),U(j,null,g,{kind:"accessor",name:"currentMap",static:!1,private:!1,access:{has:e=>"currentMap"in e,get:e=>e.currentMap,set:(e,t)=>{e.currentMap=t}},metadata:e},y,w),U(j,null,f,{kind:"getter",name:"defaultMap",static:!1,private:!1,access:{has:e=>"defaultMap"in e,get:e=>e.defaultMap},metadata:e},null,d),U(j,null,h,{kind:"method",name:"changeLanguage",static:!1,private:!1,access:{has:e=>"changeLanguage"in e,get:e=>e.changeLanguage},metadata:e},null,d),e&&Object.defineProperty(j,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:e})})(),j)});
//# sourceMappingURL=zh-TW.183f1477.js.map
